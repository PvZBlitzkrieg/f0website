<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-compatible" content="IE=edge">
        <title>Xbork</title>
        <link rel="shortcut icon" href="fav.ico" type="image/x-icon">
        
    </head>
    <body>
        <p id="checkview">
            <font size="8"><a id="inn1"></a></font>
            <font size="8"><a id="inn" href=""></a></font>
            <font size="6"><a id="inn2"></a></font>
        </p>
        <a href="https://space.bilibili.com/1808001068">点击关注b站账号</a><br>
        <B><font size="7"><font color=#f00>PublicData</font></B>
        <font size="5"><br>这是一个正在开发的ELF解析软件。</font>
        <font size="6"><br><a href="https://www.123pan.com/s/rSXuVv-fRGxh">点击下载</a></font>
    </body>
    <script>
        function checklink(){
            var inn1=document.getElementById("inn1")
            if (window.location.href.startsWith("https://")==false){
                inn1.innerHTML="正在跳转至https..."
                //location.href = "https://"+window.location.href.substring(window.location.href.indexOf("//")+2,window.location.href.length)
            }
            var check=document.getElementById("inn")
            var inn2=document.getElementById("inn2")
            var url_string = window.location.href
            var va=getQueryString(url_string)
            var link=""
            var temp=0
            if (va.startsWith("h")||va.startsWith("s")){
                for (i = 0; i < va.length; i++) { 
                        if (va[i]=="%"){
                        temp=parseInt(va[i+1]+va[i+2],16)
                        //console.log(parseInt(va[i+1]+va[i+2],16))
                        i=i+2
                    } else {
                        temp=va.charCodeAt(i)
                        //console.log(va[i])
                    }
                    if (temp>=0x30&&temp<=0x39){
                        link += String.fromCharCode(0x39-temp+0x41);
                    } else if (temp>=0x41&&temp<=0x4a){
                        link += String.fromCharCode(0x4a-temp+0x30);
                    } else if (temp>=0x4b&&temp<=0x5a){
                        link += String.fromCharCode(0x5a-temp+0x4b);
                    } else if (temp>=0x61&&temp<0x7b){
                        link += String.fromCharCode(0x7a-temp+0x61);
                    } else if(va[i]=="/") {
                        link += "?"
                    } else if(va[i]=="?") {
                        link += "/"
                    } else if(va[i]==":") {
                        link += "_"
                    } else if(va[i]=="_") {
                        link += ":"
                    } else if(va[i]=="@") {
                        link += "."
                    } else if(va[i]==".") {
                        link += "@"
                    } else {
                        link+= va[i]
                    }
                }
            }
            
            if (link!=""){
                inn1.innerHTML="你所要访问的链接为: "
                if (link.startsWith("http")==false){
                    location.href = window.location.href.split("?")[0]+"?"+link;
                    alert("您的链接为:"+window.location.href.split("?")[0]+"?"+link)
                } else{
                    location.href = link;
                }
                check.innerHTML=link+"<br/>"
                check.href=link
                inn2.innerHTML="正在跳转...<br/>注:链接由用户提供,与网站无关,请谨慎访问<br/><br/><br/><br/>----------------------------------------------------------------<br/>----------------------------------------------------------------<br/><br/><br/><br/>"

            }
        }

        function getQueryString(url_string) {
            var param=""
            var read=false
            for (i = 1; i < url_string.length; i++) {
                if (url_string[i]=="?"&&read==false){
                    read=true
                    console.log(true)
                } else if (read==true){
                    param=param+url_string[i]
                    console.log(url_string[i])
                }
            }
            return param;
        }
        checklink()
    </script>
</html>